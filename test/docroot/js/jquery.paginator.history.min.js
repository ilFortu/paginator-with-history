!function($){$.fn.paginatorHistory=function(options){function ajaxCall(page,isNext){page=parseInt(page),$.ajax({"url":url+page,"context":document.body}).done(function(content){if(settings.ajaxDoneBeforeItemsInPage.call(this),""!=content)if(isNext)$paginatorListContainer.append("<div class='list-items-page' data-page='"+page+"'>"+content+"</div>"),loadingNext=!1,$next.attr("data-page",page+1);else{$paginatorListContainer.prepend("<div class='list-items-page' data-page='"+page+"'>"+content+"</div>");var firstPageHeight=$("div.list-items-page:first").height();window.scrollTo(0,$(window).scrollTop()+firstPageHeight),page>1&&(loadingPrev=!1,$prev.attr("data-page",page-1))}settings.ajaxDoneAfterItemsInPage.call(this)})}function changeLocation(page,itemId){var newLocation="",currentPage=window.location.href;newLocation=currentPage.indexOf(paramPage+"=")<0?currentPage+(currentPage.split("?")[1]?"&":"?")+paramPage+"="+page:currentPage.replace(/(page=).*?((&)(.)*)?$/,"$1"+page+"$2"),"undefined"!=typeof itemId&&null!=itemId&&(newLocation+="#"+itemId),history.replaceState(null,null,newLocation)}var defaults={"textColor":"#000","backgroundColor":"#FFF","ajaxDoneBeforeItemsInPage":function(){},"ajaxDoneAfterItemsInPage":function(){}},settings=$.extend({},defaults,options),paramPage="page",$paginatorListContainer=this.find(".paginator-list-container"),url=this.data("paginator-url")+"?"+paramPage+"=",$next=this.find(".paginator.next"),$prev=this.find(".paginator.prev"),itemList=".list-items-page",item=".item",linkItem=".paginator-item-link",currentPage=this.find(itemList).data("page"),loadingNext=!1,loadingPrev=0==$prev.attr("data-page");$prev.attr("data-page")>0&&(loadingPrev=!0,console.log("PREV"),ajaxCall($prev.attr("data-page"),!1)),this.on("click",linkItem,function(evt){changeLocation($(this).parents(itemList).attr("data-page"),$(this).parents(item).attr("id"))}),$(window).scroll(function(){var scrollPos=$(window).scrollTop();!loadingNext&&$next.position().top-200<scrollPos+$(window).height()&&(loadingNext=!0,console.log("NEXT"),ajaxCall($next.attr("data-page"),!0)),!loadingPrev&&scrollPos-$prev.position().top<200&&(loadingPrev=!0,console.log("PREV"),ajaxCall($prev.attr("data-page"),!1));var scrollHalfPosition=$(window).scrollTop()+$(window).height()/2;$(".list-items-page").each(function(){var top=$(this).position().top,bottom=$(this).position().top+$(this).height();$(this).attr("data-page")!=currentPage&&scrollHalfPosition>=top&&bottom>=scrollHalfPosition&&(currentPage=$(this).attr("data-page"),changeLocation(currentPage,null))})})}}(jQuery);
//# sourceMappingURL=jquery.paginator.history.min.js.map